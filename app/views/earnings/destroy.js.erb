$("tr.earning-<%= @earning.id %>").remove();
$(function () {
    $('#highchart').highcharts('StockChart', {
       chart: {
            alignTicks: false,
            height: 800,
            },
       yAxis: [{
            type: 'logarithmic',
            ceiling: '<%= @graph_max*20 %>',
            max: '<%= @graph_max*20 %>',
            min: '<%= @graph_min*20 %>',
            startOnTick: false,
            endOnTick: false,
            opposite: false
        } , {
            type: 'logarithmic',
            ceiling: '<%= @graph_max %>',
            max: '<%= @graph_max %>',
            min: '<%= @graph_min %>',
            startOnTick: false,
            endOnTick: false,
            opposite: true
        }],
        xAxis: {
            min: '<%= @stock.positive_trailing_eps[0][0] %>'
        },
        series: [{
            name: "Price",
            data: <%= raw @prices  %>
        } , {
            name: "Earnings",
            data: <%= raw @stock.positive_trailing_eps %>,
            yAxis: 1,
            type: 'column'
        }]
    });
});
