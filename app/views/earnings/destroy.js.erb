$("tr.earning-<%= @earning.id %>").remove();
$(function () {
    $('#highchart').highcharts('StockChart', {
       chart: {
            alignTicks: false,
            height: 800,
            },
       yAxis: [{
            type: 'logarithmic',
            ceiling: '<%= graph_max(@earning.stock)*20 %>',
            max: '<%= graph_max(@earning.stock)*20 %>',
            min: '<%= graph_min(@earning.stock)*20 %>',
            startOnTick: false,
            endOnTick: false,
            opposite: false
        } , {
            type: 'logarithmic',
            ceiling: '<%= graph_max(@earning.stock) %>',
            max: '<%= graph_max(@earning.stock) %>',
            min: '<%= graph_min(@earning.stock) %>',
            startOnTick: false,
            endOnTick: false,
            opposite: true
        }],
        xAxis: {
            min: '<%= highchart_earnings(@earning.stock)[0][0] %>'
        },
        series: [{
            name: "Price",
            data: <%= raw highchart_quotes(@earning.stock)  %>
        } , {
            name: "Earnings",
            data: <%= raw highchart_earnings(@earning.stock) %>,
            yAxis: 1,
            type: 'column'
        }]
    });
});
