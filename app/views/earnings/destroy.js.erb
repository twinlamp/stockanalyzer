$("tr.earning-<%= @earning.id %>").remove();
$(function () {
    $('#highchart').highcharts('StockChart', {
       chart: {
            alignTicks: false,
            width: 1000,
            height: 800,
            },
       yAxis: [{
            type: 'logarithmic',
            ceiling: '<%= @stock.graph_max*20 %>',
            max: '<%= @stock.graph_max*20 %>',
            min: '<%= @stock.graph_min*20 %>',
            startOnTick: false,
            endOnTick: false,
            opposite: false
        } , {
            type: 'logarithmic',
            ceiling: '<%= @stock.graph_max %>',
            max: '<%= @stock.graph_max %>',
            min: '<%= @stock.graph_min %>',
            startOnTick: false,
            endOnTick: false,
            opposite: true
        }],
        series: [{
            name: "Price",
            data: <%= raw @stock.prices  %>
        } , {
            name: "Earnings",
            data: <%= raw @stock.get_trailing_eps %>,
            yAxis: 1,
            type: 'column'
        }]
    });
});